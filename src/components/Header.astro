---
import { Image } from 'astro:assets';
import { SITE_TITLE } from '../consts';
import logo from '../assets/logo-pages.png';
const base = import.meta.env.BASE_URL;
const normalizedBase = base.endsWith('/') ? base.slice(0, -1) : base;
const withBase = (path = '') => `${normalizedBase}/${path.replace(/^\/+/, '')}`;
---

<header class="site-header glass">
	<div class="inner">
		<a class="brand" href={withBase()}>
			<Image class="mark" src={logo} alt="" width={42} height={42} />
			<div class="text">
				<span class="eyebrow">Tobrun's</span>
				<strong>{SITE_TITLE}</strong>
			</div>
		</a>

		<nav class="nav-links">
			<a href={withBase()}>Home</a>
			<a href={withBase('articles')}>Articles</a>
			<a href={withBase('rss.xml')}>RSS</a>
		</nav>

		<div class="actions">
			<div class="social">
				<a href="https://x.com/TobrunVN" target="_blank" rel="noreferrer">
					<span class="sr-only">Follow on X</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="22" height="22">
						<path
							fill="currentColor"
							d="M5 4h3.1l3.2 4.6L14.8 4H19l-5.1 6.2L19.5 20h-3.1l-3.5-4.9L8.7 20H5.5l5.3-6.6z"
						/>
					</svg>
				</a>
				<a href="https://www.linkedin.com/in/tobrun/" target="_blank" rel="noreferrer">
					<span class="sr-only">Follow on LinkedIn</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="22" height="22">
						<path
							fill="currentColor"
							d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
						/>
					</svg>
				</a>
				<a href="https://github.com/tobrun/" target="_blank" rel="noreferrer">
					<span class="sr-only">Follow on GitHub</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="22" height="22">
						<path
							fill="currentColor"
							d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
						/>
					</svg>
				</a>
				<a href="https://huggingface.co/tobrun" target="_blank" rel="noreferrer">
					<span class="sr-only">Follow on Hugging Face</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="22" height="22">
						<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.6" fill="none" />
						<circle cx="9" cy="10" r="0.9" fill="currentColor" />
						<circle cx="15" cy="10" r="0.9" fill="currentColor" />
						<path
							d="M8.5 14c.5 1.3 1.9 2.2 3.5 2.2s3-.9 3.5-2.2"
							fill="none"
							stroke="currentColor"
							stroke-width="1.4"
							stroke-linecap="round"
						/>
					</svg>
				</a>
				<a href="https://linktr.ee/tobrun" target="_blank" rel="noreferrer">
					<span class="sr-only">Linktree</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="22" height="22">
						<path
							fill="currentColor"
							d="M11 3h2v6.2l3.2-3.2L17.6 7 13 11.6V21h-2v-9.4L6.4 7l1.4-1.4L11 9.2z"
						/>
					</svg>
				</a>
			</div>
			<a class="btn btn-secondary" href={withBase('articles')}>Start reading</a>
		</div>
	</div>
</header>

<style>
	.site-header {
		position: sticky;
		top: 0;
		z-index: 10;
		backdrop-filter: blur(16px);
		margin-bottom: 2rem;
		border-bottom: 1px solid var(--border);
	}

	.inner {
		width: min(1180px, 100%);
		margin: 0 auto;
		padding: 1rem 1.5rem;
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 1rem;
	}

	.brand {
		display: inline-flex;
		align-items: center;
		gap: 0.65rem;
		color: #f8fafc;
	}

	.brand .mark {
		width: 100%;
		height: 100%;
		display: block;
	}

	.brand .text {
		display: flex;
		flex-direction: column;
		gap: 0.1rem;
	}

	.brand .eyebrow {
		color: var(--primary-soft);
		font-size: 0.82rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
	}

	.brand strong {
		font-size: 1.05rem;
	}

	.nav-links {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	.nav-links a {
		padding: 0.65rem 1rem;
		border-radius: 999px;
		color: var(--text-muted);
		border: 1px solid transparent;
		transition: color 140ms ease, border-color 140ms ease, background 140ms ease;
	}

	.nav-links a:hover {
		color: #f8fafc;
		border-color: var(--border);
		background: rgba(255, 255, 255, 0.04);
	}

	.actions {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	.social {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
	}

	.social a {
		width: 36px;
		height: 36px;
		border-radius: 12px;
		display: grid;
		place-items: center;
		color: var(--text-muted);
		border: 1px solid var(--border);
		background: rgba(255, 255, 255, 0.03);
		transition: all 140ms ease;
	}

	.social a:hover {
		color: #f8fafc;
		border-color: rgba(139, 92, 246, 0.6);
		box-shadow: var(--glow);
	}

	.btn {
		height: 44px;
		padding: 0 1.2rem;
	}

	.btn.btn-secondary {
		border-color: rgba(255, 255, 255, 0.12);
	}

	@media (max-width: 960px) {
		.nav-links {
			display: none;
		}
	}

	@media (max-width: 640px) {
		.inner {
			padding: 0.75rem 1rem;
		}

		.actions {
			gap: 0.5rem;
		}

		.btn {
			display: none;
		}
	}
</style>
